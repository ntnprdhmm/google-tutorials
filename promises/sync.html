<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Sync test</title>
    </head>
    <body>

    </body>
</html>
<script type="text/javascript" src="functions.js"></script>
<script type="text/javascript">
    // problem => lock the browser
    try {

        var story = getJSONSync('story.json');
        addHtmlToPage(story.heading);

        story.chapterUrls.forEach(function(chapterUrl) {
            var chapter = getJSONSync(chapterUrl);
            addHtmlToPage(chapter.html);
        });

        addTextToPage('Done');

    } catch(err) {
        addTextToPage('Err : ' + err.message);
    }
</script>
